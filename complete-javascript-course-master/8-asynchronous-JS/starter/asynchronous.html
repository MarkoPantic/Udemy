<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Asynchronous JavaScript</title>
</head>
<body>
    <h1>Asynchronous JavaScript</h1>
    <script>
        // const second = () => {
        //     setTimeout(() => {
        //         console.log('Hey there im async');
        //     }, 2000);
        // }

        // const first = () => {
        //     console.log('App has strated!');
        //     second();
        //     console.log('The end');
        // }

        // first();


            // function getRecipe() {

            //     setTimeout(() => {
            //         const recipeID = [123, 342, 2134, 46];
            //         console.log(recipeID);

            //         setTimeout((id) => {
                        
            //             const recipe = {
            //                 title: 'Fresh tomato pasta',
            //                 publisher: 'Marko'
            //             }

            //             console.log(`${id}: This is the recipe you wanted ${recipe.title}`);

            //             setTimeout((publisher) => {

            //                 const recipe = {
            //                     title: 'Italian pizza',
            //                     publisher: publisher
            //                 }

            //                 console.log(recipe);
                            
            //             }, 2000, recipe.publisher);

            //         }, 1000, recipeID[2]);
            //     }, 1500)

            // }

            // getRecipe();





                const getIDs = new Promise((resolve, reject) => {

                    setTimeout(() => {
                        
                        resolve([123, 342, 2134, 46]);

                    }, 1500);

                });

                const getRecipe = recID => {
                    return new Promise((resolve, reject) => {

                        setTimeout((ID) => {
                            
                            const recipe = {
                                title: 'Fresh tomato pasta',
                                publisher: 'Marko'
                            }
                            resolve(recipe)

                        }, 1500, recID);

                        

                    })
                }


                const getRelated = publisher => {

                    return new Promise((resolve, reject) => {
                        setTimeout((pub) => {

                            const recipe = {
                                title: 'Italian pizza',
                                publisher: 'Marko'
                            }

                            resolve(pub.publisher)
                            
                        }, 1500, publisher);
                    })

                }
                
                // getIDs
                // .then((IDs) => {
                //     console.log(IDs);
                //     return getRecipe(IDs[2])
                // })

                // .then(recipe => {
                //     console.log(recipe);
                //     return getRelated(recipe.puiblisher)
                // })

                // .then(recipe => {

                //     console.log(recipe);
                // })

                // .catch(error => {
                //     console.log(error);
                // })


                    async function getRecipesAW() {
                        const IDs = await getIDs;
                        console.log(IDs);
                        const recipe = await getRecipe(IDs[2]);
                        console.log(recipe);
                        const related = await getRelated(recipe);
                        console.log(related);
                        return recipe
                    }

                    getRecipesAW().then(recipe => console.log(recipe))
                    
    </script>
</body>
</html>